<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="521px" preserveAspectRatio="none" style="width:215px;height:521px;background:#FFFFFF;" version="1.1" viewBox="0 0 215 521" width="215px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="44" x="85.5" y="6"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="24" x="95.5" y="28.0645">开始</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="138" x="38.5" y="60.584"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="118" x="48.5" y="82.6484">初始化串口4(UART4)</text><rect fill="#FFFFFF" height="207.3506" style="stroke:#000000;stroke-width:1.0;" width="203" x="6" y="105.168"/><path d="M121,105.168 L121,115.1826 L111,125.1826 L6,125.1826 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105" x="9" y="120.2432">初始化ESP8266</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="183" x="16" y="142.1826"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="163" x="26" y="164.2471">设置ESP8266工作于STA模式</text><rect fill="#FFFFFF" height="49.168" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="125" x="45" y="196.7666"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="105" x="55" y="218.8311">发送wifi名称和密码</text><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="50" x="55" y="233.415">连接WiFi</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="172" x="21.5" y="265.9346"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="152" x="31.5" y="287.999">设置ESP8266为单链接模式</text><rect fill="#FFFFFF" height="138.1826" style="stroke:#000000;stroke-width:1.0;" width="198" x="8.5" y="322.5186"/><path d="M116.5,322.5186 L116.5,332.5332 L106.5,342.5332 L8.5,342.5332 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="98" x="11.5" y="337.5938">连接物联网平台</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="140" x="37.5" y="359.5332"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="120" x="47.5" y="381.5977">以TCP模式连接服务器</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="178" x="18.5" y="414.1172"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="158" x="28.5" y="436.1816">发送 MQTT Connect 数据包</text><rect fill="#FFFFFF" height="34.584" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="44" x="85.5" y="480.7012"/><text fill="#000000" font-family="Verdana" font-size="12" lengthAdjust="spacing" textLength="24" x="95.5" y="502.7656">结束</text><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="40.584" y2="60.584"/><polygon fill="#000000" points="103.5,50.584,107.5,60.584,111.5,50.584,107.5,54.584" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="176.7666" y2="196.7666"/><polygon fill="#000000" points="103.5,186.7666,107.5,196.7666,111.5,186.7666,107.5,190.7666" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="245.9346" y2="265.9346"/><polygon fill="#000000" points="103.5,255.9346,107.5,265.9346,111.5,255.9346,107.5,259.9346" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="95.168" y2="142.1826"/><polygon fill="#000000" points="103.5,132.1826,107.5,142.1826,111.5,132.1826,107.5,136.1826" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="394.1172" y2="414.1172"/><polygon fill="#000000" points="103.5,404.1172,107.5,414.1172,111.5,404.1172,107.5,408.1172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="300.5186" y2="359.5332"/><polygon fill="#000000" points="103.5,349.5332,107.5,359.5332,111.5,349.5332,107.5,353.5332" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="107.5" x2="107.5" y1="448.7012" y2="480.7012"/><polygon fill="#000000" points="103.5,470.7012,107.5,480.7012,111.5,470.7012,107.5,474.7012" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[cc265bd662e55c5cc4beaef1fb2d19f6]
@startuml
!theme plain
:开始;

:初始化串口4(UART4);
group 初始化ESP8266 

:设置ESP8266工作于STA模式;
:发送wifi名称和密码\n连接WiFi;

:设置ESP8266为单链接模式;
end group
group 连接物联网平台
:以TCP模式连接服务器;
:发送 MQTT Connect 数据包;
end group
:结束;
@enduml 

@startuml







<style>
  root {
    BackgroundColor white
    FontColor black
    FontName Verdana
    HyperLinkColor blue
    LineColor black
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor black
skinparam BackgroundColor white
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor black
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam Boundary {
  FontColor black
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor black
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor white
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor black
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor black
  FontName Verdana
}
skinparam Footer {
  FontColor black
  FontName Verdana
}
skinparam Header {
  FontColor black
  FontName Verdana
}
skinparam Hyperlink {
  Color blue
}
skinparam IconPackage {
  Color black
  BackgroundColor white
}
skinparam IconPrivate {
  Color black
  BackgroundColor white
}
skinparam IconProtected {
  Color black
  BackgroundColor white
}
skinparam IconPublic {
  Color black
  BackgroundColor white
}
skinparam Note {
  FontColor black
  FontName Verdana
}
skinparam Object {
  BorderColor black
}
skinparam Package {
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam State {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeA {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeC {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeE {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeI {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeN {
  BackgroundColor white
  BorderColor black
}
skinparam UseCaseStereoType {
  FontColor black
  FontName Verdana
}
:开始;

:初始化串口4(UART4);
group 初始化ESP8266 

:设置ESP8266工作于STA模式;
:发送wifi名称和密码\n连接WiFi;

:设置ESP8266为单链接模式;
end group
group 连接物联网平台
:以TCP模式连接服务器;
:发送 MQTT Connect 数据包;
end group
:结束;
@enduml 

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 CST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>