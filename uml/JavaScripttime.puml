@startuml
!theme plain 
skinparam monochrome true

actor 用户 as user
participant Browser
participant Server

user -> Browser : access page
Browser -> Server: GET http://localhost:8080/topics
Server -> Database: Query topics
Database --> Server: Return topics
Server --> Browser: Return topics

activate Browser

Browser -> Browser: Render topic list

loop Topics
    activate Browser
    Browser -> Browser: Create <li> element for each topic
    activate Server
    user -> Browser: Click <li>
    Browser -> Server: Click on topic
    Server -> Server: Load content for topic
    Server -> Database: Query messages for topic
    Database --> Server: Return messages
    Server --> Browser: Return messages
    deactivate Server
    Browser -> Browser: Update content with messages
    deactivate Browser
end

Browser -> Browser: Start countdown

loop Countdown
    activate Browser
    Browser -> Browser: Decrease countdown
    activate Browser
    Browser -> Server: Load content for topic
    Server -> Server: Load content for topic
    Server -> Database: Query messages for topic
    Database --> Server: Return messages
    Server --> Browser: Return messages
    deactivate Server
    Browser -> Browser: Update content with messages
    deactivate Browser

    alt Countdown reached 0
        Browser -> Browser: Reset countdown
    else
        Browser -> Browser: Continue countdown
    end

end

deactivate Browser

@enduml
